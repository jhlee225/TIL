# 테스트 주도 개발

## Test-Driven Development(TDD) 테스트가 코드 작성을 주도하는 개발방식.

매우 짧은 개발 사이클의 반복에 의존하는 소프트웨어 개발 프로세스.
요구되는 새로운 기능에 대한 자동화된 테스트케이스를 먼저 작성하고 해당 테스트를 통과하는 가장 간단한 코드를 작성
일단 테스트 통과하는 코드를 작성하고 상황에 맞게 리팩토링하는 과정을 통해 개발한다.

### `테스트 코드`

새로운 기능을 추가하기 전 해당 기능의 요구사항과 명세를 통해 테스트 코드를 먼저 작성한다.
개발자가 사용자 케이스와 사용자 스토리 등으로 기능을 이해하여, 코드를 작성하기 전에 요구사항에 집중 하게 된다.

### `기능 추가에서의 이점`

어떤 새로운 기능을 추가하면 잘 작동하던 기능이 제대로 작동하지 않는 경우가 발생할 수 있다.개발자가 이를 인지하지 못하는 것을 방지하기 위해 테스트 코드를 작성한다. 새로운 기능을 추가할 때 테스트 코드를 작성함으로써, 새로운 기능이 제대로 작동함과 동시에 기존의 기능들이 잘 작동하는지 테스트를 통해 확인할 수 있는 것이다.

### `리팩토링에서의 이점`

가독성이 좋게 coding convention 을 맞추고, 네이밍 규칙을 적용하여 메소드명, 변수명, 클래스명에 일관성을 줘야하며, 앞으로의 확장성 또한 고려해야 한다. 이와 동시에 비즈니스 로직에 대한 고려도 반드시 필요하며, 예외처리 부분 역시 빠뜨릴 수 없다. 물론 코드량이 적을 때는 이런 저런 것들을 모두 신경쓰면서 코드를 작성할 수 있지만 끊임없이 발견되는 버그들을 디버깅하는 과정에서 코드가 더럽혀지기 마련이다. 이러한 이유로 코드량이 방대해지면서 리팩토링을 하게 된다.

테스트 코드는 리팩토링의 중심을 잡아준다. 함수를 여러 함수로 나누는 과정에서 기능이 오작동을 일으킬 수 있지만 간단히 테스트를 돌려봄으로써 이에 대한 확인을 하고 리팩토링을 진행할 수 있다.

=> 리팩토링 속도도 빨라지고 코드의 퀄리티도 그만큼 향상하게 된다.

보다 객체지향적이고 확장 가능이 용이한 코드, 재설계의 시간을 단축시킬 수 있는 코드, 디버깅 시간이 단축되는 코드가 TDD 와 함께 탄생하는 것이다.

### `코드 생산성`

두 배는 아니더라도 분명 코드량이 늘어난다. 비즈니스 로직, 각종 코드 디자인에도 시간이 많이 소요되는데, 거기에다가 테스트 코드까지 작성하기란 여간 벅찬 일이 아닐 것이다. 코드 퀄리티보다는 빠른 생산성이 요구되는 시점에서 TDD 는 큰 걸림돌이 될 수 있다.

### `테스트 코드 작성의 난이도`

진입 장벽이 존재한다. 어떠한 부분을 테스트해야할 지, 어떻게 테스트해야할 지, 여러 테스트 프레임워크 중 어떤 것이 우리의 서비스와 맞는지 둥 여러 부분들에 대한 학습이 필요하고 익숙해지는데에도 시간이 걸린다.
팀에서 한 명만 익숙해진다고 해결될 일이 아니다. 개발은 팀 단위로 수행되기 때문에 팀원 전체의 동의가 필요하고 팀원 전체가 익숙해져야 한다.

### `테스트 코드의 맹점`

세상에는 다양한 사용자가 존재하며, 생각지도 못한 예외 케이스가 존재할 수 있다. 만약 테스트를 반드시 해봐야 하는 부분에 있어서 테스트 코드를 작성하는데 어려움이 발생한다면? 이러한 상황에서 주객이 전도하는 상황이 발생할 수 있다. 분명 실제 코드가 더 중심이 되어야 하는데 테스트를 위해서 코드의 구조를 바꿔야 하나하는 고민이 생긴다. 또한 발생할 수 있는 상황에 대한 테스트 코드를 작성하기 위해 배보다 배꼽이 더 커지는 경우가 허다하다. 실제 구현 코드보다 방대해진 코드를 관리하는 것도 쉽지만은 않은 일이 된 것이다.

모든 코드에 대해서 테스트 코드를 작성할 수 없으며 작성할 필요도 없다. 또한 테스트 코드를 작성한다고 해서 버그가 발생하지 않는 것도 아니다. 애초에 TDD 는 100% coverage 와 100% 무결성을 주장하지 않는다.
